webpackJsonp([43],{159:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),u=n.n(i),s=n(53),c=n(51),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){var t=function(t){function n(){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,t),l(n,[{key:"render",value:function(){return u.a.createElement(e,Object.assign({glpi:c.a},this.props))}}]),n}(i.PureComponent);return Object(s.b)(t)};t.a=p},572:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(49),s=n.n(u),c=n(0),l=n.n(c),p=n(1),f=n.n(p),m=n(6),h=n(4),g=n(21),b=n(159),y=n(140),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=function(e){function t(e){var n=this;o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.componentDidMount=r(s.a.mark(function e(){var t,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.props.glpi.initSessionByUserToken({userToken:window.appConfig.pluginToken});case 3:return e.next=5,i.props.glpi.getAllItems({itemtype:"Plugin"});case 5:if(t=e.sent,r=t.filter(function(e){return"Flyve MDM Demo"===e.name}),!(r.length<1||1!==r[0].state)){e.next=9;break}throw new Error;case 9:i.setState({isLoading:!1,selfRegistration:!0},function(){i.usernameInput.focus(),i.props.glpi.killSession()}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),i.setState({isLoading:!1,selfRegistration:!1},function(){i.usernameInput.focus()});case 15:case"end":return e.stop()}},e,n,[[0,12]])})),i.LogInServer=function(e){e.preventDefault(),i.props.username?i.props.changePhase(2):i.setState(function(e){return{classInput:"win-textbox color-line-alert",errorMessage:l.a.createElement("p",{className:"color-type-alert"},l.a.createElement("span",null," ",h.default.t("login.username_not_registered")," "),e.selfRegistration?l.a.createElement(m.a,{to:g.a+"/signUp"},h.default.t("login.create_a_new")):null)}})},i.state={classInput:"win-textbox",errorMessage:"",isLoading:!0,selfRegistration:null},i}return i(t,e),d(t,[{key:"render",value:function(){var e=this;return this.state.isLoading?l.a.createElement("div",{style:{margin:50,height:"140px"}},l.a.createElement(y.a,{message:h.default.t("commons.loading")+"..."})):l.a.createElement("div",{className:"authentication__email"},l.a.createElement("h2",null,h.default.t("login.title")),l.a.createElement("p",null,h.default.t("login.use_your_account"),l.a.createElement("br",null),l.a.createElement("a",{href:"https://flyve-mdm.com/"},h.default.t("login.what_is_this"))),this.state.errorMessage,l.a.createElement("form",{onSubmit:this.LogInServer},l.a.createElement("input",{type:"text",name:"username",ref:function(t){e.usernameInput=t},className:this.state.classInput,placeholder:h.default.t("commons.username"),value:this.props.username,onChange:this.props.changeInput,required:!0}),l.a.createElement("button",{className:"btn btn--primary",type:"submit"},h.default.t("commons.next"))),this.state.selfRegistration?l.a.createElement("p",null,h.default.t("login.no_account"),"\xa0",l.a.createElement(m.a,{to:g.a+"/signUp"},h.default.t("login.create_one"))):"")}}]),t}(c.PureComponent);v.propTypes={username:f.a.string.isRequired,changeInput:f.a.func.isRequired,changePhase:f.a.func.isRequired,glpi:f.a.object.isRequired},t.default=Object(b.a)(v)}});
//# sourceMappingURL=43.286813d6.chunk.js.map