webpackJsonp([36],{139:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(0),i=a.n(s),l=a(1),c=a.n(l),u=a(143),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),p(t,[{key:"componentDidMount",value:function(){this.forceAnimation()}},{key:"forceAnimation",value:function(){Object(u.c)(this.pane).play()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"content-pane "+this.props.className,ref:function(t){e.pane=t}},this.props.children)}}]),t}(s.PureComponent);f.defaultProps={className:""},f.propTypes={className:c.a.string,children:c.a.oneOfType([c.a.object,c.a.array]).isRequired},t.a=f},140:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(1),s=a.n(o),i=function(e){var t=r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"circle"}),r.a.createElement("div",{className:"circle"}),r.a.createElement("div",{className:"circle"}),r.a.createElement("div",{className:"circle"}),r.a.createElement("div",{className:"circle"}));return e.small?r.a.createElement("div",{className:"loading loading--small",style:e.style},r.a.createElement("div",null,t)):r.a.createElement("div",{className:"loading",style:Object.assign({marginTop:-e.headerSize},e.style)},r.a.createElement("div",null,t,r.a.createElement("p",null,e.message)))};i.defaultProps={style:{},small:!1,headerSize:0,message:""},i.propTypes={message:s.a.string,headerSize:s.a.number,small:s.a.bool,style:s.a.object},t.a=i},158:function(e,t,a){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,o){try{var s=t[r](o),i=s.value}catch(e){return void a(e)}if(!s.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=a(49),l=a.n(i),c=a(0),u=a.n(c),p=a(1),f=a.n(p),d=a(4),m=a(166),h=a(165),b=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),y=function(e){function t(e){var a=this;r(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.change=function(e){s.props.function(s.props.name,e.target.value)},s.validate=function(e,t){if(e){var a=h.a.validation(e,t);s.setState({isCorrect:a.isCorrect,errors:a.errors,className:a.isCorrect?"win-textbox":"win-textbox error-input"})}},s.deleteEmail=n(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.isOK(s.contentDialog);case 2:t=e.sent,t&&s.props.delete(s.props.name);case 4:case"end":return e.stop()}},e,a)})),s.state={isCorrect:!0,errors:[],className:"win-textbox"},s}return s(t,e),b(t,[{key:"render",value:function(){var e=this,t=this.props.delete?u.a.createElement("span",{className:"iconFont deleteIcon",style:{margin:10,fontSize:18},onClick:this.deleteEmail,role:"button",tabIndex:"0"}):void 0;return u.a.createElement("div",{className:"froms__col"},u.a.createElement("p",null,this.props.label),u.a.createElement("input",{type:this.props.type,className:this.state.className,name:this.props.type+"-"+this.props.name,value:this.props.value||"",placeholder:this.props.placeholder,onChange:this.change,onBlur:function(){return e.validate(e.props.parametersToEvaluate,e.props.value)},disabled:this.props.disabled,style:this.props.style,ref:this.props.inputRef,required:this.props.required}),u.a.createElement(h.a,{errors:this.state.errors}),t,this.props.delete?u.a.createElement(m.a,{title:d.default.t("commons.delete")+" "+this.props.label,message:this.props.value,reference:function(t){e.contentDialog=t}}):u.a.createElement("span",null))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!t.isCorrect||e.forceValidation){if(e.parametersToEvaluate){var a=h.a.validation(e.parametersToEvaluate,e.value);return{isCorrect:a.isCorrect,errors:a.errors,className:a.isCorrect?"win-textbox":"win-textbox error-input"}}return Object.assign({},t)}return Object.assign({},t)}}]),t}(c.PureComponent);y.defaultProps={label:"",value:"",type:"text",required:!1,placeholder:null,function:function(){},disabled:!1,style:{},inputRef:function(){},delete:null,parametersToEvaluate:null,forceValidation:!1},y.propTypes={label:f.a.string,type:f.a.string,name:f.a.oneOfType([f.a.string,f.a.number]).isRequired,value:f.a.string,placeholder:f.a.string,function:f.a.func,disabled:f.a.bool,style:f.a.object,inputRef:f.a.func,delete:f.a.func,parametersToEvaluate:f.a.object,forceValidation:f.a.bool,required:f.a.bool},t.a=y},159:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(0),i=a.n(s),l=a(53),c=a(51),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),p=function(e){var t=function(t){function a(){return n(this,a),r(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return o(a,t),u(a,[{key:"render",value:function(){return i.a.createElement(e,Object.assign({glpi:c.a},this.props))}}]),a}(s.PureComponent);return Object(l.b)(t)};t.a=p},160:function(e,t,a){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,o){try{var s=t[r](o),i=s.value}catch(e){return void a(e)}if(!s.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=a(49),l=a.n(i),c=a(0),u=a.n(c),p=a(1),f=a.n(p),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),m=function(e){function t(e){var a=this;r(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.componentDidMount=function(){s.props.glpi&&s.props.request?s.listRequest():s.handleRefresh(s.state.options)},s.change=function(e){s.props.function(s.props.name,e.target.value)},s.listRequest=n(l.a.mark(function e(){var t,n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,s.props.glpi[s.props.request.method](s.props.request.params);case 3:n=e.sent,e.t0=s.props.request.method,e.next="getMyProfiles"===e.t0?7:"searchItems"===e.t0?9:"getAllItems"===e.t0?17:"getSubItems"===e.t0?19:"getMyEntities"===e.t0?21:23;break;case 7:return n.myprofiles.forEach(function(e){t.push({content:e[s.props.request.content],value:e[s.props.request.value]})}),e.abrupt("break",24);case 9:if(!n.data){e.next=16;break}if(n.totalcount===n.count){e.next=15;break}return r={itemtype:s.props.request.params.itemtype,options:Object.assign({},s.props.request.params.options,{range:"0-"+(n.totalcount-1)})},e.next=14,s.props.glpi[s.props.request.method](r);case 14:n=e.sent;case 15:n.data.forEach(function(e){t.push({content:e[s.props.request.content],value:e[s.props.request.value]})});case 16:return e.abrupt("break",24);case 17:return n&&n.forEach(function(e){t.push({content:e[s.props.request.content],value:e[s.props.request.value]})}),e.abrupt("break",24);case 19:return n.forEach(function(e){t.push({content:e[s.props.request.content],value:e[s.props.request.value]})}),e.abrupt("break",24);case 21:return n.myentities.forEach(function(e){t.push({content:e[s.props.request.content],value:e[s.props.request.value]})}),e.abrupt("break",24);case 23:return e.abrupt("break",24);case 24:s.setState({options:t});case 25:case"end":return e.stop()}},e,a)})),s.handleRefresh=function(){var e=n(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],t.forEach(function(e){e.name?n.push({value:e.value,content:e.name}):n.push({value:e,content:e})}),s.setState({options:n});case 3:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}(),s.state={options:s.props.options},s}return s(t,e),d(t,[{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"froms__col"},u.a.createElement("p",null,this.props.label),u.a.createElement("select",{name:this.props.name,value:this.props.value||void 0,onChange:this.change,required:this.props.required},u.a.createElement("option",null,"---"),this.state.options.map(function(t,a){return u.a.createElement("option",{value:t.value,key:""+e.props.name+a.toString()},t.content)})))}}]),t}(c.PureComponent);m.defaultProps={options:[],required:!1,label:null,glpi:null,request:null,value:void 0},m.propTypes={label:f.a.string,name:f.a.string.isRequired,value:f.a.oneOfType([f.a.string,f.a.number]),options:f.a.array,function:f.a.func.isRequired,glpi:f.a.object,request:f.a.object,required:f.a.bool},t.a=m},161:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(0),i=a.n(s),l=a(1),c=a.n(l),u=a(171),p=a(172),f=a(173),d=a(162),m=a.n(d),h=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),b=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.change=function(e){var t=new Date,n={year:a.state.year?a.state.year:t.getFullYear(),month:a.state.month?a.state.month:m.a[t.getMonth()],day:a.state.day?a.state.day:1};n[e.target.name]=e.target.value,a.setState(Object.assign({},n),a.props.function(a.props.name,new Date(n.year+" "+n.month+" "+n.day)))};var o=new Date(a.props.value);return a.state={year:a.props.value?o.getFullYear():void 0,month:a.props.value?m.a[o.getMonth()]:void 0,day:a.props.value?o.getDate():void 0},a}return o(t,e),h(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"froms__col"},i.a.createElement("p",null,this.props.label),i.a.createElement("div",{className:"win-disposable win-datepicker"},i.a.createElement("select",{required:this.props.required,className:"win-datepicker-month win-order0",name:"month",value:this.state.month,onChange:this.change},i.a.createElement("option",null,"---"),Object(p.a)()),i.a.createElement("select",{className:"win-datepicker-date win-order1",name:"day",value:this.state.day,onChange:this.change},i.a.createElement("option",null,"---"),Object(f.a)(this.state.year,this.state.month)),i.a.createElement("select",{className:"win-datepicker-year win-order2",name:"year",value:this.state.year,onChange:this.change},i.a.createElement("option",null,"---"),Object(u.a)())))}}]),t}(s.PureComponent);b.defaultProps={required:!1,value:void 0},b.propTypes={label:c.a.string.isRequired,name:c.a.oneOfType([c.a.string,c.a.number]).isRequired,value:c.a.instanceOf(Date),function:c.a.func.isRequired,required:c.a.bool},t.a=b},162:function(e,t){e.exports=["January","February","March","April","May","June","July","August","September","October","November","December"]},163:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(1),s=a.n(o),i=function(e){return r.a.createElement("div",{className:"froms__col"},r.a.createElement("p",null,e.label),r.a.createElement("textarea",{rows:e.rows,className:"win-textarea",name:e.name,value:e.value||void 0,placeholder:e.placeholder,onChange:function(t){return e.function(e.name,t.target.value)},disabled:e.disabled,style:e.style,required:e.required}))};i.defaultProps={label:"",required:!1,rows:6,placeholder:null,function:function(){},style:{},disabled:!1,value:void 0},i.propTypes={label:s.a.string,name:s.a.oneOfType([s.a.string,s.a.number]).isRequired,value:s.a.string,placeholder:s.a.string,function:s.a.func,disabled:s.a.bool,style:s.a.object,required:s.a.bool,rows:s.a.number},t.a=i},165:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=a(0),i=a.n(s),l=a(1),c=a.n(l),u=a(4),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),p(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"error-message"},i.a.createElement("ul",null,this.props.errors.map(function(e,t){return i.a.createElement("li",{key:"errorMessage-"+t.toString()},"-",e)})))}}]),t}(s.PureComponent);f.validation=function(e,t){var a=[];if(e.isRequired&&!t&&a.push(u.default.t("validation.required_field")),e.minimunLength&&t.length<e.minimunLength&&a.push(u.default.t("validation.insufficient_characters")+" "+e.minimunLength+" "+u.default.t("validation.is_requiered")),e.needDigit){/[\d]/g.test(t)||a.push(u.default.t("validation.one_digit"))}if(e.needLowercaseCharacter){/[a-z]/g.test(t)||a.push(u.default.t("validation.lowercase_character"))}if(e.needUppercaseCharacter){/[A-Z]/g.test(t)||a.push(u.default.t("validation.uppercase_character"))}if(e.needSymbol){/[!@#%^&*?><)(+=._\-\\[\]^~`'"\u02dc$\u02c6\/:;{}|]/g.test(t)||a.push(u.default.t("validation.special_character"))}if(e.isEmail){/^[a-zA-Z0-9.!#$%&\u2019*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/g.test(t)||a.push(u.default.t("validation.invalid_email"))}return e.isEqualTo&&t!==e.isEqualTo.value&&a.push(e.isEqualTo.message),e.customValidation&&e.customValidation(t)&&a.push(e.customValidation(t)),a.length<=0?{isCorrect:!0,errors:[]}:{isCorrect:!1,errors:a}},f.defaultProps={errors:[]},f.propTypes={errors:c.a.array},t.a=f},170:function(e,t,a){"use strict";var n=a(158),r=a(160),o=a(161),s=a(163),i=a(174);a.d(t,"b",function(){return n.a}),a.d(t,"c",function(){return r.a}),a.d(t,"a",function(){return o.a}),a.d(t,"d",function(){return s.a}),t.e=i.a},171:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(){for(var e=[],t=1980;t<=2100;t+=1)e.push(r.a.createElement("option",{value:t,key:"year"+t},t));return e}},172:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(162),s=a.n(o);t.a=function(){var e=[];return s.a.forEach(function(t){e.push(r.a.createElement("option",{value:t,key:"month"+t},t))}),e}},173:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e,t){var a={January:31,February:28,March:31,April:30,May:31,June:30,July:31,August:31,September:30,October:31,November:30,December:31};(e%400===0||e%100!==0&&e%4===0)&&(a.February=29);var n=[];if(t)for(var o=1;o<=a[t];o+=1)n.push(r.a.createElement("option",{value:o,key:"day-"+o.toString()},o));return n}},174:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(1),s=a.n(o),i=a(175),l=function(e){var t=void 0;return e.icon&&(t=r.a.createElement("div",{className:"froms__row froms__row--icon"},r.a.createElement("span",{className:"iconFont "+e.icon}),e.title?r.a.createElement("span",{style:{marginLeft:"10px"}},e.title):null)),r.a.createElement(r.a.Fragment,null,t,e.data.map(function(t,a){return Object(i.a)({icon:e.icon,elements:t,index:a})}))};l.propTypes={data:s.a.array.isRequired,icon:s.a.string,title:s.a.string},l.defaultProps={icon:null,title:null},t.a=l},175:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(1),s=a.n(o),i=a(160),l=a(161),c=a(163),u=a(158),p=function(e){var t=e.icon,a=e.elements,n=e.index,o=t?{marginLeft:30,overflow:"hidden"}:{overflow:"hidden"};return r.a.createElement("div",{className:"froms__row",style:o,key:"fromsRow-"+n.toString()},a.map(function(e){return"select"===e.type?r.a.createElement(i.a,{label:e.label,name:e.name,value:e.value,options:e.options,function:e.function,glpi:e.glpi,request:e.request,key:e.name}):"date"===e.type?r.a.createElement(l.a,{label:e.label,name:e.name,value:e.value,function:e.function,key:e.name}):"textArea"===e.type?r.a.createElement(c.a,{label:e.label,type:e.type,name:e.name,value:e.value,placeholder:e.placeholder,function:e.function,disabled:e.disabled,style:e.style,delete:e.delete,key:e.name}):r.a.createElement(u.a,{label:e.label,type:e.type,name:e.name,value:e.value,placeholder:e.placeholder,function:e.function,disabled:e.disabled,style:e.style,delete:e.delete,parametersToEvaluate:e.parametersToEvaluate,forceValidation:e.forceValidation,key:e.name})}))};p.propTypes={icon:s.a.string,elements:s.a.array.isRequired,index:s.a.number.isRequired},p.defaultProps={icon:null},t.a=p},989:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(r,o){try{var s=t[r](o),i=s.value}catch(e){return void a(e)}if(!s.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}return n("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=a(49),c=a.n(l),u=a(0),p=a.n(u),f=a(1),d=a.n(f),m=a(4),h=a(187),b=a(50),y=a(166),v=a(165),g=a(170),w=a(140),_=a(139),E=a(159),O=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),j=function(e){function t(e){var a=this;o(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.componentDidMount=r(c.a.mark(function e(){var t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.props.glpi.getAllItems({itemtype:"Plugin"});case 3:if(t=e.sent,n=t.filter(function(e){return"Flyve MDM Demo"===e.name}),!(n.length<1||1!==n[0].status)){e.next=7;break}throw new Error;case 7:i.setState({isLoading:!1,selfRegistration:!0}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),i.setState({isLoading:!1,selfRegistration:!1});case 13:case"end":return e.stop()}},e,a,[[0,10]])})),i.deleteUser=r(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.isOK(i.deleteAccount);case 2:t=e.sent,t&&i.setState({isLoading:!0},r(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.props.glpi.deleteItem({itemtype:b.a.User,input:{id:i.state.currentUser.id},queryString:{force_purge:!0}});case 3:i.props.toast.setNotification({title:m.default.t("commons.success"),body:m.default.t("notifications.user_deleted"),type:"success"}),Object(h.a)(),localStorage.clear(),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),i.props.toast.setNotification(i.props.handleMessage({type:"alert",message:e.t0})),i.setState({isLoading:!1}),i.changeMode("");case 13:case"end":return e.stop()}},e,a,[[0,8]])})));case 4:case"end":return e.stop()}},e,a)})),i.closeSession=r(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.isOK(i.killSession);case 2:t=e.sent,t&&(Object(h.a)(),i.props.toast.setNotification({title:m.default.t("commons.success"),body:m.default.t("notifications.session_closed"),type:"success"}));case 4:case"end":return e.stop()}},e,a)})),i.cleanWebStorage=r(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.isOK(i.deleteBrowserData);case 2:t=e.sent,t&&(localStorage.clear(),Object(h.a)(),i.props.toast.setNotification({title:m.default.t("commons.success"),body:m.default.t("notifications.clear_local_storage"),type:"success"}));case 4:case"end":return e.stop()}},e,a)})),i.savePassword=function(e){e.preventDefault(),i.setState({forceValidation:!0},function(){var e=i.buildDataArray(),t=!0;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n))for(var o=e[n],s=0;s<o.length;s+=1){var l=o[s];v.a.validation(l.parametersToEvaluate,l.value).isCorrect||(t=!1)}t?i.setState({isLoading:!0},r(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.props.glpi.updateItem({itemtype:b.a.User,id:i.state.currentUser.id,input:{password:i.state.password,password2:i.state.passwordConfirmation}});case 3:i.props.toast.setNotification({title:m.default.t("commons.success"),body:m.default.t("notifications.new_password_saved"),type:"success"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),i.props.toast.setNotification(i.props.handleMessage({type:"alert",message:e.t0}));case 9:i.setState({isLoading:!1}),i.changeMode("");case 11:case"end":return e.stop()}},e,a,[[0,6]])}))):i.setState({forceValidation:!0})})},i.changeState=function(e,t){i.setState(n({},e,t))},i.changeMode=function(e){"Change password"===e?i.setState({isLoading:!0},r(c.a.mark(function t(){var n,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.props.glpi.getGlpiConfig();case 2:n=t.sent,r=n.cfg_glpi,i.setState({isLoading:!1,passwordConfiguration:{minimunLength:r.password_min_length,needDigit:r.password_need_number,needLowercaseCharacter:r.password_need_letter,needUppercaseCharacter:r.password_need_caps,needSymbol:r.password_need_symbol},forceValidation:!1,password:"",passwordConfirmation:"",mode:e});case 5:case"end":return t.stop()}},t,a)}))):i.setState({mode:e})},i.buildDataArray=function(){return[[{label:m.default.t("commons.password"),type:"password",name:"password",value:i.state.password,placeholder:m.default.t("commons.password"),function:i.changeState,parametersToEvaluate:Object.assign({isRequired:!0},i.state.passwordConfiguration),forceValidation:i.state.forceValidation,disabled:!1,style:null}],[{label:m.default.t("commons.password_confirmation"),type:"password",name:"passwordConfirmation",value:i.state.passwordConfirmation,placeholder:m.default.t("commons.password_confirmation"),function:i.changeState,parametersToEvaluate:Object.assign({isRequired:!0},i.state.passwordConfiguration,{isEqualTo:{value:i.state.password,message:m.default.t("commons.passwords_not_match")}}),forceValidation:i.state.forceValidation,disabled:!1,style:null}]]},i.state={password:"",passwordConfirmation:"",passwordConfiguration:void 0,forceValidation:!1,isLoading:!0,selfRegistration:null,currentUser:localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")):{}},i}return i(t,e),O(t,[{key:"render",value:function(){var e=this;if(this.state.isLoading)return p.a.createElement("div",{style:{height:"100%"}},p.a.createElement(w.a,{message:m.default.t("commons.loading")+"..."}));switch(this.state.mode){case m.default.t("commons.change_password"):return p.a.createElement(_.a,null,p.a.createElement("h2",null," ",this.state.mode," "),p.a.createElement("form",{className:"list-content",onSubmit:this.savePassword},p.a.createElement(g.e,{data:this.buildDataArray()}),p.a.createElement("br",null),p.a.createElement("button",{className:"btn btn--secondary",type:"button",style:{marginRight:10},onClick:function(){return e.changeMode("")}},m.default.t("commons.cancel")),p.a.createElement("button",{className:"btn btn--primary",type:"submit"},m.default.t("commons.save"))));default:return p.a.createElement(p.a.Fragment,null,p.a.createElement(y.a,{title:m.default.t("commons.kill_session"),message:m.default.t("settings.security.close_session_message"),reference:function(t){e.killSession=t}}),p.a.createElement(y.a,{title:m.default.t("settings.security.delete_data"),message:m.default.t("settings.security.delete_data_message"),reference:function(t){e.deleteBrowserData=t}}),p.a.createElement(y.a,{title:m.default.t("settings.security.delete_account"),message:m.default.t("settings.security.delete_account_message"),reference:function(t){e.deleteAccount=t}}),p.a.createElement(_.a,null,p.a.createElement("h2",{style:{margin:"10px"}},m.default.t("commons.security")),p.a.createElement("div",{className:"list-element"},p.a.createElement("div",{className:"list-element__message"},m.default.t("commons.password"),p.a.createElement("div",{className:"list-element__detail"},m.default.t("settings.security.change_flyve_passsword"))),p.a.createElement("div",{className:"list-element__controller"},p.a.createElement("button",{className:"btn btn--secondary",onClick:function(){return e.changeMode(m.default.t("commons.change_password"))},type:"button"},m.default.t("commons.edit")))),p.a.createElement("div",{className:"list-element"},p.a.createElement("div",{className:"list-element__message"},m.default.t("commons.kill_session"),p.a.createElement("div",{className:"list-element__detail"},m.default.t("settings.security.destroy_session"))),p.a.createElement("div",{className:"list-element__controller"},p.a.createElement("button",{className:"btn btn--secondary",onClick:this.closeSession,type:"button"},m.default.t("commons.logout")))),p.a.createElement("div",{className:"list-element"},p.a.createElement("div",{className:"list-element__message"},m.default.t("settings.security.delete_data"),p.a.createElement("div",{className:"list-element__detail"},m.default.t("settings.security.delete_data_detail"))),p.a.createElement("div",{className:"list-element__controller"},p.a.createElement("button",{className:"btn btn--secondary",onClick:this.cleanWebStorage,type:"button"},m.default.t("commons.delete")))),this.state.selfRegistration?p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"list-element"},p.a.createElement("div",{className:"list-element__message"},m.default.t("settings.security.delete_account"),p.a.createElement("div",{className:"list-element__detail"},m.default.t("settings.security.delete_account_detail"))),p.a.createElement("div",{className:"list-element__controller"},p.a.createElement("button",{className:"btn btn--secondary",onClick:this.deleteUser,type:"button"},m.default.t("commons.delete"))))):""))}}}]),t}(u.PureComponent);j.propTypes={toast:d.a.object.isRequired,glpi:d.a.object.isRequired,handleMessage:d.a.func.isRequired},t.default=Object(E.a)(j)}});
//# sourceMappingURL=36.67299df9.chunk.js.map